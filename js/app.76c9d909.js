(function(){"use strict";var t={5437:function(t,e,n){var a=n(9242),s=n(3396);function o(t,e,n,a,o,u){const i=(0,s.up)("ChatContainer");return(0,s.wg)(),(0,s.j4)(i)}const u={class:"chat"};function i(t,e,n,a,o,i){const r=(0,s.up)("ChatHeading"),h=(0,s.up)("ChatMessages"),l=(0,s.up)("ChatInterface");return(0,s.wg)(),(0,s.iD)("div",u,[(0,s.Wm)(r),(0,s.Wm)(h,{onSubmit:t.submit,messages:t.messages},null,8,["onSubmit","messages"]),(0,s.Wm)(l,{onSubmit:t.submit},null,8,["onSubmit"])])}n(560);var r=n.p+"img/avatar.fc14e1a3.jpg";const h={class:"chat__heading"},l=(0,s._)("img",{class:"chat__avatar",src:r,alt:"avatar"},null,-1),c=(0,s._)("h2",{class:"chat__name"},"Чат-бот Валера",-1),g=[l,c];function m(t,e,n,a,o,u){return(0,s.wg)(),(0,s.iD)("div",h,g)}var p=(0,s.aZ)({name:"ChatHeading"}),d=n(89);const f=(0,d.Z)(p,[["render",m]]);var v=f;function b(t,e,n,o,u,i){const r=(0,s.up)("ChatInput"),h=(0,s.up)("ChatSendButton");return(0,s.wg)(),(0,s.iD)("form",{class:"chat__interface",autocomplete:"off",action:"#",onSubmit:e[1]||(e[1]=(0,a.iM)(((...e)=>t.sendMessage&&t.sendMessage(...e)),["prevent"]))},[(0,s.Wm)(r,{value:t.value,"onUpdate:value":e[0]||(e[0]=e=>t.value=e),onKeydown:(0,a.D2)((0,a.iM)(t.handleEnterKey,["prevent"]),["enter"])},null,8,["value","onKeydown"]),(0,s.Wm)(h)],32)}var w=n(7139);const y=["value"];function C(t,e,n,a,o,u){return(0,s.wg)(),(0,s.iD)("textarea",{ref:"inputRef",class:"chat__input",type:"text",name:"message",placeholder:"Введите сообщение...",rows:"1",value:t.value,style:(0,w.j5)({height:t.inputHeight}),onInput:e[0]||(e[0]=(...e)=>t.handleInput&&t.handleInput(...e)),onKeydown:e[1]||(e[1]=(...e)=>t.handleKeyDown&&t.handleKeyDown(...e))},null,44,y)}var _=(0,s.aZ)({name:"ChatInput",props:{value:String},emits:{"update:value"(t){return t}},data:function(){return{inputHeight:"auto",initialHeight:0}},methods:{handleInput(t){const e=t.target;this.inputHeight="auto",this.inputHeight=e.scrollHeight+"px",this.$emit("update:value",e.value)},handleKeyDown(t){if("Backspace"===t.key){const e=t.target;this.inputHeight="auto",this.inputHeight=Math.min(e.scrollHeight,this.initialHeight)+"px",this.$emit("update:value",e.value)}}},watch:{value(){const t=this.$refs.inputRef;this.inputHeight="auto",this.inputHeight=t.scrollHeight+"px"}},mounted(){const t=this.$refs.inputRef;this.initialHeight=t.scrollHeight}});const H=(0,d.Z)(_,[["render",C]]);var k=H;const S={class:"chat__button-send",type:"submit"},Z=(0,s._)("svg",{width:"30px",height:"30px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M20 12L4 4L6 12M20 12L4 20L6 12M20 12H6",stroke:"#ffffff","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),M=[Z];function x(t,e,n,a,o,u){return(0,s.wg)(),(0,s.iD)("button",S,M)}var D=(0,s.aZ)({name:"ChatSendButton"});const O=(0,d.Z)(D,[["render",x]]);var j=O,I=(0,s.aZ)({name:"ChatInterface",emits:{submit(t){return t}},data(){return{value:""}},methods:{handleEnterKey(t){t.shiftKey?this.value=this.value+"\n":this.value.replace(/\n/g,"")&&this.sendMessage()},sendMessage(){this.value.replace(/\n/g,"")&&(this.$emit("submit",{value:this.value,author:!0,button:!1,delayCount:0}),this.value="")}},components:{ChatInput:k,ChatSendButton:j}});const K=(0,d.Z)(I,[["render",b]]);var L=K;const $={class:"chat__messages",ref:"messagesBlock"};function P(t,e,n,a,o,u){const i=(0,s.up)("ChatMessage");return(0,s.wg)(),(0,s.iD)("ul",$,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.messages,(e=>((0,s.wg)(),(0,s.j4)(i,{onSubmit:t.handleSubmit,onShow:t.scrollPage,key:t.messages.indexOf(e),message:e},null,8,["onSubmit","onShow","message"])))),128))],512)}const B={key:0,class:"chat__loading"},E={key:1};function T(t,e,n,o,u,i){return(0,s.wy)(((0,s.wg)(),(0,s.iD)("li",{class:(0,w.C_)(["chat__message",{right:t.message.author,button:t.message.button}]),onClick:e[0]||(e[0]=(...e)=>t.handleClick&&t.handleClick(...e))},[t.messageLoading?((0,s.wg)(),(0,s.iD)("span",B,"...")):((0,s.wg)(),(0,s.iD)("span",E,(0,w.zw)(t.message.value),1))],2)),[[a.F8,t.messageShow]])}var W=(0,s.aZ)({name:"ChatMessage",props:{message:{type:Object,required:!0}},data(){return{messageLoading:!0,messageShow:!1}},emits:{submit(t){return t},show(t){return t}},methods:{handleClick(){this.message.button&&!this.messageLoading&&this.$emit("submit",{value:this.message.value,author:!0,button:!1,delayCount:0})}},mounted(){setTimeout((()=>{this.messageShow=!0,this.$emit("show",!0)}),1e3*this.message.delayCount),this.message.author?this.messageLoading=!1:setTimeout((()=>{this.messageLoading=!1}),1e3*this.message.delayCount+1e3)}});const R=(0,d.Z)(W,[["render",T]]);var U=R,q=(0,s.aZ)({name:"ChatMessages",props:{messages:{type:Array,required:!0}},emits:{submit(t){return t}},methods:{handleSubmit(t){this.$emit("submit",t)},scrollPage(){const t=this.$refs.messagesBlock;setTimeout((()=>{t.scrollTop=t.scrollHeight}))}},components:{ChatMessage:U}});const A=(0,d.Z)(q,[["render",P]]);var F=A,z=JSON.parse('{"c0":{"value":"Привет, что я могу сделать?","buttons":["Закажи пиццу","Установи будильник","Выведи погоду"]},"ZP":{"value":"Что еще я могу сделать?","buttons":["Закажи пиццу","Установи будильник","Выведи погоду"]},"HP":{"Закажи пиццу":"Я заказал пиццу.","Установи будильник":"Я установил будильник.","Выведи погоду":"Сегодня солнечно."},"vU":"Извините, я Вас не понял."}');function J(t){if(!t)return N(z.c0,0);const e=z.HP[t],n=[];return e?n.push({value:e,author:!1,button:!1,delayCount:0}):n.push({value:z.vU,author:!1,button:!1,delayCount:0}),N(z.ZP,1).forEach((t=>{n.push(t)})),n}function N(t,e){const n=[];return n.push({value:t.value,author:!1,button:!1,delayCount:e}),t.buttons.forEach(((t,a)=>{n.push({value:t,author:!1,button:!0,delayCount:a+e+1})})),n}var Y=(0,s.aZ)({name:"ChatContainer",data(){return{messages:[]}},methods:{submit(t){this.messages.push({value:t.value,author:t.author,button:t.button,delayCount:t.delayCount})},...J},components:{ChatHeading:v,ChatMessages:F,ChatInterface:L},watch:{"messages.length"(){const t=this.messages[this.messages.length-1];t.author&&J(t.value).forEach((t=>{this.submit(t)}))}},mounted(){J("").forEach((t=>{this.submit(t)}))}});const G=(0,d.Z)(Y,[["render",i]]);var Q=G,V=(0,s.aZ)({name:"App",components:{ChatContainer:Q}});const X=(0,d.Z)(V,[["render",o]]);var tt=X;(0,a.ri)(tt).mount("#app")}},e={};function n(a){var s=e[a];if(void 0!==s)return s.exports;var o=e[a]={exports:{}};return t[a].call(o.exports,o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(e,a,s,o){if(!a){var u=1/0;for(l=0;l<t.length;l++){a=t[l][0],s=t[l][1],o=t[l][2];for(var i=!0,r=0;r<a.length;r++)(!1&o||u>=o)&&Object.keys(n.O).every((function(t){return n.O[t](a[r])}))?a.splice(r--,1):(i=!1,o<u&&(u=o));if(i){t.splice(l--,1);var h=s();void 0!==h&&(e=h)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[a,s,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.p="/chatbot_optimal-city-technologies/"}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,o,u=a[0],i=a[1],r=a[2],h=0;if(u.some((function(e){return 0!==t[e]}))){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(r)var l=r(n)}for(e&&e(a);h<u.length;h++)o=u[h],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(l)},a=self["webpackChunkchatbot_optimal_city_technologies"]=self["webpackChunkchatbot_optimal_city_technologies"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(5437)}));a=n.O(a)})();
//# sourceMappingURL=app.76c9d909.js.map